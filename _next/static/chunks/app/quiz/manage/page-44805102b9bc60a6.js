(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[812],{4746:function(e,n,t){Promise.resolve().then(t.bind(t,799))},799:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var s=t(7437),i=t(7138),a=t(2265),r=t(8776),c=t(7440);function u(){let[e,n]=(0,a.useState)([]),[t,u]=(0,a.useState)(""),[o,d]=(0,a.useState)(!1);async function l(){n(await (0,r._z)())}async function f(e){e.preventDefault();let n=t.trim();if(n){d(!0);try{await (0,r.Jx)(n),u(""),await l()}finally{d(!1)}}}async function m(e,n){var t;let s=null===(t=prompt("Нова назва?",n))||void 0===t?void 0:t.trim();s&&s!==n&&(await (0,r.Or)(e,s),await l())}async function w(e){confirm("Видалити набір разом зі словами?")&&(await (0,r.kB)(e),await l())}return(0,a.useEffect)(()=>{l()},[]),(0,s.jsxs)("div",{className:"container-nice py-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Керування наборами"}),(0,s.jsxs)("form",{onSubmit:f,className:"flex items-center gap-2",children:[(0,s.jsx)("input",{className:"input",placeholder:"Назва нового набору",value:t,onChange:e=>u(e.target.value)}),(0,s.jsx)("button",{className:"btn btn-primary",disabled:o||!t.trim(),children:o?"Створення…":"Створити"})]})]}),(0,s.jsx)("div",{className:"card p-4 md:p-6",children:(0,s.jsxs)("div",{className:"grid gap-2",children:[e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.default,{className:"btn btn-ghost",href:(0,c.w)("/quiz/manage/words?setId=".concat(e.id)),children:"Редагувати слова"}),(0,s.jsx)("button",{className:"btn btn-ghost",onClick:()=>m(e.id,e.name),children:"Перейменувати"}),(0,s.jsx)("button",{className:"btn btn-ghost",onClick:()=>w(e.id),children:"Видалити"})]})]},e.id)),!e.length&&(0,s.jsx)("div",{className:"text-gray-600",children:"Немає наборів. Створіть перший."})]})})]})}},8776:function(e,n,t){"use strict";t.d(n,{G7:function(){return u},Jx:function(){return l},Or:function(){return f},_z:function(){return r},cZ:function(){return c},kB:function(){return m},oA:function(){return a},rI:function(){return w},wH:function(){return o},x8:function(){return d}});var s=t(2464);function i(e){return{id:e.id,hint:e.hint,answer:Array.isArray(e.answers)?e.answers:"string"==typeof e.answers?[e.answers]:[],shortMemory:0}}async function a(){let e=(0,s.e)(),{data:n,error:t}=await e.from("sets").select("id, name, words:words(id, hint, answers)").order("name",{ascending:!0});return t?[]:(n||[]).map(e=>({id:e.id,name:e.name,words:(e.words||[]).map(i)}))}async function r(){let e=(0,s.e)(),{data:n,error:t}=await e.from("sets").select("id, name").order("name",{ascending:!0});return t?[]:n}async function c(e){let n=(0,s.e)(),{data:t,error:a}=await n.from("sets").select("id, name, words:words(id, hint, answers)").eq("id",e).maybeSingle();return a||!t?null:{id:t.id,name:t.name,words:(t.words||[]).map(i)}}async function u(e,n,t){let i=(0,s.e)();await i.from("words").insert({set_id:e,hint:n,answers:t})}async function o(e,n){if(!n.length)return;let t=(0,s.e)();await t.from("words").insert(n.map(n=>({set_id:e,hint:n.hint,answers:n.answers})))}async function d(e){let n=(0,s.e)();await n.from("words").delete().eq("id",e)}async function l(e){let n=(0,s.e)();await n.from("sets").insert({name:e})}async function f(e,n){let t=(0,s.e)();await t.from("sets").update({name:n}).eq("id",e)}async function m(e){let n=(0,s.e)();await n.from("sets").delete().eq("id",e)}async function w(e,n){let t=(0,s.e)();await t.from("words").update(n).eq("id",e)}},2464:function(e,n,t){"use strict";t.d(n,{e:function(){return i}});var s=t(5570);let i=()=>(0,s.createBrowserClient)("https://wlyskuyqdvvzivgrssyd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndseXNrdXlxZHZ2eml2Z3Jzc3lkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxOTQwODcsImV4cCI6MjA3MDc3MDA4N30.PuRk6yZtgrMMdsVYzgWkabvlvtuLwv6PKD47m8aowYA")},7440:function(e,n,t){"use strict";function s(e){return e}t.d(n,{w:function(){return s}})}},function(e){e.O(0,[570,138,971,23,744],function(){return e(e.s=4746)}),_N_E=e.O()}]);